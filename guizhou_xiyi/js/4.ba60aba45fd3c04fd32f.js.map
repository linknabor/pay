{"version":3,"sources":["webpack:///src/pages/xiyi_list.vue","webpack:///./src/pages/xiyi_list.vue?0cdb","webpack:///./src/pages/xiyi_list.vue","webpack:///./src/assets/images/index/noorder.png"],"names":["vm","xiyi_list","data","orderList","inited","created","this","mounted","query","methods","receiveData","postData","res","success","result","alert","gotoPage","$router","push","path","gotoDetail","idx","status","oId","id","cancel","statusStr","message","pay","weixin_js_sdk_default","a","config","debug","appId","timestamp","nonceStr","signature","jsApiList","chooseWXPay","package","pkgStr","signType","paySign","notifyPayed","url","getData","components","computed","pages_xiyi_list","render","_vm","_h","$createElement","_c","_self","staticClass","length","attrs","src","__webpack_require__","_v","on","click","$event","_e","_l","order","index","key","_s","createDateStr","billLogo","alt","orderNo","serviceDateStr","staticStyle","color","realAmount","stopPropagation","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports","p"],"mappings":"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","file":"guizhou_xiyi/js/4.ba60aba45fd3c04fd32f.js","sourcesContent":["<template>\r\n   <div class=\"xiyi_list\">\r\n       <div class=\"nopage\" v-if=\"orderList.length==0&&inited\">\r\n\t\t\t\t<img class=\"nopage_img\" src=\"../assets/images/index/noorder.png\"/>\r\n\t\t\t\t<div class=\"nopage_desc\">您还没有订单哦！</div>\r\n\t\t\t\t<div class=\"btn_desc\">点击下方按钮立即预约</div>\r\n\t\t\t\t<div class=\"order_btn\" @click=\"gotoPage()\">立即预约</div>\r\n\t\t</div>\r\n\r\n        <div v-if=\"orderList.length>0\">\r\n            <div class=\"list_body\" v-for=\"(order,index) in orderList\" :key=\"order.id\" @click=\"gotoDetail(index)\">\r\n\t\t\t\t<p class=\"borderline\"></p>\r\n\t\t\t\t<div class=\"time_desc\">下单时间: {{order.createDateStr}}</div>\r\n\t\t\t\t<div class=\"list_main\">\r\n\t\t\t\t\t<img class=\"item_logo\" :src=\"order.billLogo\" alt=\"\" />\r\n\t\t\t\t\t<div class=\"item_desc\">订单编号: </div><div class=\"item_desc\">{{order.orderNo}}</div>\r\n\t\t\t\t\t<div class=\"item_desc\">取件时间: {{order.serviceDateStr}}</div>\r\n\t\t\t\t\t<div  class=\"item_desc highlight\">{{order.statusStr}}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"status_bar\">\r\n\t\t\t\t\t<span>实际支付: <span style=\"color: #ff8a00;\">{{order.realAmount}}元</span></span>\r\n\t\t\t\t\t<p class=\"fr btns\">\r\n\t\t\t\t\t\t<span class=\"cancel\" @click.stop=\"cancel(index)\" v-if=\"order.status==1\">取消订单</span>\r\n\t\t\t\t\t\t<span class=\"pay\" @click.stop=\"pay(index)\" v-if=\"order.status==1\">付款</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n        </div>\r\n   </div>\r\n</template>\r\n\r\n<script>\r\nlet vm;\r\nimport wx from 'weixin-js-sdk';\r\nexport default {\r\n   data () {\r\n       return {\r\n          orderList:[\r\n            //  {\r\n            //     id:'4',\r\n            //     createDateStr:'2019-4-19',\r\n            //     orderNo:'333',\r\n            //     serviceDateStr:'2019-3324',\r\n            //     statusStr:'432',\r\n            //     status:'1',\r\n            //     realAmount:'100',\r\n            //     billLogo:'http://img.e-shequ.com/Fu3XAhDbMYqnQiyyicsZfgQIGNdR',\r\n            //  }\r\n          ],\r\n\t\t  inited:false,\r\n       };\r\n   },\r\n   created() {vm=this},\r\n   mounted() {\r\n        //   vm.common.checkRegisterStatus();\r\n \r\n        vm.query();//获取订单\r\n   },\r\n   methods: {\r\n       query() {\r\n            vm.receiveData.postData(vm,'/yunxiyi/bills/0',null,'res',function() {\r\n                if(vm.res.success) {\r\n                    vm.orderList=vm.res.result;\r\n\t\t            vm.inited = true;\r\n                }else {\r\n                    vm.inited = true;\r\n                    alert(\"订单数据获取失败，请稍后重试！\");    \r\n                }\r\n            })\r\n       },\r\n       //立即预约\r\n       gotoPage() {\r\n            vm.$router.push({path:'/'});\r\n       },\r\n       //点击订单\r\n       gotoDetail(idx) {\r\n           if(vm.orderList[idx].status<8){\r\n                vm.$router.push({path:'/xiyi_detail',query:{'oId':vm.orderList[idx].id}})\r\n           }\r\n       },\r\n       //取消订单\r\n       cancel(idx){\r\n            vm.receiveData.postData(vm,\"/yunxiyi/bill/\"+vm.orderList[idx].id+\"/cancel\",null,'res',function() {\r\n                if(vm.res.success) {\r\n                    vm.orderList[idx].status=8;\r\n\t\t\t\t    vm.orderList[idx].statusStr=\"已取消\";\r\n                }else {\r\n                    alert(vm.res.message?\"订单取消失败，请稍后重试！\":vm.res.message);\r\n                }\r\n            })\r\n       },\r\n       //付款\r\n       pay(idx) {\r\n            vm.receiveData.postData(vm,'/yunxiyi/pay/'+vm.orderList[idx].id,null,'res',function() {\r\n                if(vm.res.success) {\r\n                     wx.config({\r\n                        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n                        appId: vm.res.result.appId, // 必填，公众号的唯一标识\r\n                        timestamp: vm.res.result.timestamp, // 必填，生成签名的时间戳\r\n                        nonceStr: vm.res.result.nonceStr, // 必填，生成签名的随机串\r\n                        signature: vm.res.result.signature,// 必填，签名，见附录1\r\n                        jsApiList: ['chooseWXPay'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\r\n                    });\r\n                    wx.chooseWXPay({\r\n                        \"timestamp\":vm.res.result.timestamp,\r\n                        \"nonceStr\":vm.res.result.nonceStr,\r\n                        \"package\":vm.res.result.pkgStr,\r\n                        \"signType\":vm.res.result.signType,\r\n                        \"paySign\":vm.res.result.signature,\r\n                        success: function (res) {\r\n                            vm.notifyPayed(idx);\r\n                         }\r\n                        });\r\n                }else {\r\n                      alert(vm.res.message?\"支付请求失败，请稍后重试！\":vm.res.message);\r\n                }\r\n            })\r\n       },\r\n       //通知 \r\n       notifyPayed(idx) {\r\n           let url =\"/yunxiyi/notifyPayed/\"+vm.orderList[idx].id;\r\n                 vm.receiveData.getData(vm,url,'Data',function(){\r\n                    vm.orderList[idx].statusStr=\"已支付\";\r\n        \t\t    vm.orderList[idx].status=2;  \r\n                  });\r\n       }\r\n       \r\n   },\r\n   components: {},\r\n   computed: {},\r\n}\r\n</script>\r\n\r\n<style  scoped>\r\n.xiyi_list {\r\n    font-size: 1em;\r\n    background-color: #f4f5f7;\r\n}\r\n.nopage {\r\n    position: fixed;\r\n    height: 100%;\r\n    width: 100%;\r\n    background-color: #eeeeee;\r\n    text-align: center;\r\n}\r\n.nopage_img {\r\n    margin-top: 30%;\r\n    width: 50%;\r\n}\r\n.nopage_desc {\r\n    margin-top: 15px;\r\n    font-size: 16px;\r\n}\r\n.btn_desc {\r\n    position: fixed;\r\n    bottom: 50px;\r\n    font-size: 16px;\r\n    width: 100%;\r\n}\r\n.order_btn {\r\n    position: fixed;\r\n    bottom: 0px;\r\n    font-size: 22px;\r\n    width: 100%;\r\n    background-color: #ff8a00;\r\n    color: white;\r\n    padding: 8px;\r\n}\r\n.list_body{\r\n    margin-bottom: 15px;\r\n    box-sizing: border-box;\r\n    clear: both;\r\n    background-color: #fff;\r\n    font-size:15px;\r\n    border-bottom: 10px solid #f4f5f7;\r\n}\r\n.borderline{\r\n    height:1px;\r\n    background-image: url(\"../assets/images/index/line3.png\");\r\n}\r\n.time_desc{\r\n    color:#666666;\r\n    padding:15px 0 0 15px;\r\n}\r\n.list_main{\r\n    padding:15px;\r\n    height:90px;\r\n    clear:right;\r\n}       \r\n.item_logo{\r\n    width:84px;\r\n    height:84px;\r\n    float:left;\r\n    margin-right: 15px;\r\n}\r\n.item_desc{\r\n    height:26px;\r\n    line-height: 26px;\r\n}\r\n.highlight{\r\n    color:#ff8a00;\r\n}\r\n.status_bar{\r\n    height: 40px;\r\n    line-height: 40px;\r\n    padding: 0px 15px;\r\n    border-top:1px solid #f4f5f7;\r\n} \r\n.btns>span{\r\n    display: inline-block;\r\n    height: 28px;\r\n    width:70px;\r\n    line-height: 28px;\r\n    text-align: center;\r\n    border-radius: 5px;\r\n    margin-left: 10px;\r\n}\r\n.cancel{\r\n    border:1px solid #aaa;\r\n}\r\n.pay,.ems{\r\n    background-color: #ff8a00;\r\n    color:#fff;\r\n}  \r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/xiyi_list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"xiyi_list\"},[(_vm.orderList.length==0&&_vm.inited)?_c('div',{staticClass:\"nopage\"},[_c('img',{staticClass:\"nopage_img\",attrs:{\"src\":require(\"../assets/images/index/noorder.png\")}}),_vm._v(\" \"),_c('div',{staticClass:\"nopage_desc\"},[_vm._v(\"您还没有订单哦！\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn_desc\"},[_vm._v(\"点击下方按钮立即预约\")]),_vm._v(\" \"),_c('div',{staticClass:\"order_btn\",on:{\"click\":function($event){_vm.gotoPage()}}},[_vm._v(\"立即预约\")])]):_vm._e(),_vm._v(\" \"),(_vm.orderList.length>0)?_c('div',_vm._l((_vm.orderList),function(order,index){return _c('div',{key:order.id,staticClass:\"list_body\",on:{\"click\":function($event){_vm.gotoDetail(index)}}},[_c('p',{staticClass:\"borderline\"}),_vm._v(\" \"),_c('div',{staticClass:\"time_desc\"},[_vm._v(\"下单时间: \"+_vm._s(order.createDateStr))]),_vm._v(\" \"),_c('div',{staticClass:\"list_main\"},[_c('img',{staticClass:\"item_logo\",attrs:{\"src\":order.billLogo,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"item_desc\"},[_vm._v(\"订单编号: \")]),_c('div',{staticClass:\"item_desc\"},[_vm._v(_vm._s(order.orderNo))]),_vm._v(\" \"),_c('div',{staticClass:\"item_desc\"},[_vm._v(\"取件时间: \"+_vm._s(order.serviceDateStr))]),_vm._v(\" \"),_c('div',{staticClass:\"item_desc highlight\"},[_vm._v(_vm._s(order.statusStr))])]),_vm._v(\" \"),_c('div',{staticClass:\"status_bar\"},[_c('span',[_vm._v(\"实际支付: \"),_c('span',{staticStyle:{\"color\":\"#ff8a00\"}},[_vm._v(_vm._s(order.realAmount)+\"元\")])]),_vm._v(\" \"),_c('p',{staticClass:\"fr btns\"},[(order.status==1)?_c('span',{staticClass:\"cancel\",on:{\"click\":function($event){$event.stopPropagation();_vm.cancel(index)}}},[_vm._v(\"取消订单\")]):_vm._e(),_vm._v(\" \"),(order.status==1)?_c('span',{staticClass:\"pay\",on:{\"click\":function($event){$event.stopPropagation();_vm.pay(index)}}},[_vm._v(\"付款\")]):_vm._e()])])])}),0):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-240ed6d8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/xiyi_list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-240ed6d8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./xiyi_list.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./xiyi_list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./xiyi_list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-240ed6d8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./xiyi_list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-240ed6d8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/xiyi_list.vue\n// module id = null\n// module chunks = ","module.exports = __webpack_public_path__ + \"guizhou_xiyi/img/noorder.7bb5098.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/index/noorder.png\n// module id = WQ8D\n// module chunks = 4"],"sourceRoot":""}