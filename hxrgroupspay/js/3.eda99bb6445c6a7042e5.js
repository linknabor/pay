webpackJsonp([3],{"+rSu":function(e,t){},RWFv:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("YJId"),a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"controller"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.load,expression:"load"}],staticClass:"load6",attrs:{id:"LoadingBar"}},[o("div",{staticClass:"bounce1"}),e._v(" "),o("div",{staticClass:"bounce2"}),e._v(" "),o("div",{staticClass:"bounce3"})]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.load,expression:"load"}],staticClass:"black_overlay",attrs:{id:"fade"}}),e._v(" "),o("div",{class:{rule_intro:e.searchBarFixed},staticStyle:{width:"100%"},attrs:{id:"searchBar"},on:{click:e.gotosgrouprulr}},[o("img",{staticStyle:{width:"100%"},attrs:{alt:"",src:r("S8T/")}})]),e._v(" "),o("div",[e.product.pictureList.length>0?o("swiper",{ref:"mySwiper",attrs:{options:e.swiperOption}},[e._l(e.product.pictureList,function(e,t){return o("swiper-slide",{key:t},[o("div",{staticClass:"ban1"},[o("img",{attrs:{src:e,alt:""}})])])}),e._v(" "),o("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2):e._e()],1),e._v(" "),o("div",{staticClass:"product-info p15"},[o("div",{staticClass:"product-detail-name fs16"},[e._v(e._s(e.rule.name))]),e._v(" "),o("div",{staticStyle:{width:"100%",height:"30px"}},[o("div",{staticClass:"highlight fs22 fl three_div"},[e._v("¥ "+e._s(e.rule.price)+" ")]),e._v(" "),o("div",{staticClass:"highlight fl fs14 three_div",staticStyle:{"padding-top":"8px"}},[e._v(e._s(e.rule.discount)+" ")]),e._v(" "),o("div",{staticClass:"ori-price2 three_div",staticStyle:{"padding-top":"8px"}},[e._v("运费  "),o("span",{staticClass:"highlight"},[e._v("¥"+e._s(e.rule.postageFee))])])]),e._v(" "),o("div",{staticStyle:{width:"100%",height:"20px"}},[o("div",{staticClass:"ori-price2 fl three_div"},[e._v("市场价"),o("del",[e._v("¥ "+e._s(e.rule.oriPrice))])]),e._v(" "),o("div",{staticClass:"ori-price2 fl three_div"},[e._v("目标份数"),o("span",{staticClass:"highlight"},[e._v(e._s(e.rule.groupMinNum))]),e._v("份")]),e._v(" "),o("div",{staticClass:"ori-price2 three_div",attrs:{"ms-visible":"rule.freeShippingNum<999"}},[o("span",{staticClass:"highlight"},[e._v(e._s(e.rule.freeShippingNum))]),e._v("件包邮")])]),e._v(" "),o("div",{staticStyle:{width:"100%",height:"1px"}},[e._v(" ")])]),e._v(" "),e.finished?e._e():o("div",{staticClass:"mt2 time-wrap bb3"},[o("span",{staticClass:"time-text"},[e._v("剩余")]),e._v(" "),"00"!=e.left.days?o("span",[o("span",{staticClass:"time-number"},[e._v(e._s(e.left.days))]),e._v("天")]):e._e(),e._v(" "),o("span",{staticClass:"time-number"},[e._v(e._s(e.left.hours))]),o("span",[e._v("时")]),e._v(" "),o("span",{staticClass:"time-number"},[e._v(e._s(e.left.minitus))]),o("span",[e._v("分")]),e._v(" "),o("span",[o("span",{staticClass:"time-number"},[e._v(e._s(e.left.seconds))]),e._v("秒")]),e._v(" "),o("span",{staticClass:"time-text"},[e._v("结束")])]),e._v(" "),e.finished?o("div",{staticClass:"mt2 time-wrap bb3  fs18"},[e._v("\n\t\t    已结束\n\t    ")]):e._e(),e._v(" "),o("div",{staticClass:"rgroup-info bb3",attrs:{id:"products"}},[o("div",{staticClass:"fl ",staticStyle:{"margin-top":"23px","margin-left":"15px",color:"#999","font-size":"14px"}},[e._v("成团进度")]),e._v(" "),e._m(0),e._v(" "),o("div",{staticClass:"fr",staticStyle:{"margin-top":"23px",color:"#333","font-size":"15px","margin-right":"15px"}},[e._v("已参团人数"),o("span",{staticStyle:{color:"#FF9933","font-size":"15px","margin-left":"5px"}},[e._v(e._s(e.rule.currentNum))])])]),e._v(" "),o("div",{staticClass:"p15 mb15"},[o("div",{staticClass:"section-title",staticStyle:{"padding-left":"0px","padding-top":"0px"},on:{click:e.toggleDetail}},[e._v("\n                商品详情\n                "),o("i",{staticClass:"icon more-icon align-right fr",class:{topIcon:e.showDetail}})]),e._v(" "),o("ul",{staticStyle:{"padding-top":"3px"}},[o("li",{staticClass:"detail-item",domProps:{innerHTML:e._s(e.serviceDesc1)}})]),e._v(" "),e.showDetail?o("ul",{staticStyle:{"padding-top":"3px"}},[o("li",{staticClass:"detail-item",domProps:{innerHTML:e._s(e.serviceDescMore1)}})]):e._e()]),e._v(" "),o("div",{staticClass:"activityTitleLine",staticStyle:{"margin-bottom":"85px",display:"block"}},[o("span",{staticClass:"more_btn",on:{click:function(t){e.goclassify()}}},[e._v("点击查看更多商品")])]),e._v(" "),o("div",{staticClass:"btn-home-fixed",staticStyle:{color:"white",position:"fixed",width:"100%",bottom:"0px"}},[o("span",{staticClass:"fl",staticStyle:{height:"40px","line-height":"40px",width:"36%","background-color":"#444","text-align":"center","font-size":"15px"},on:{click:function(t){e.goclassify()}}},[e._v("\n                更多团购\n            ")]),e._v(" "),o("span",{staticClass:"fl",class:{useless:e.rule.leftSeconds<0},staticStyle:{height:"40px","line-height":"40px",width:"64%","background-color":"#ff8a00","text-align":"center","font-size":"15px"},on:{click:function(t){e.buy()}}},[e._v("\n                马上参团\n            ")])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fr plr10",staticStyle:{"border-left":"#d5d59d 1px solid"},attrs:{id:"processImg"}},[t("canvas",{attrs:{width:"70px",height:"70px"}})])}]};var i=function(e){r("+rSu"),r("dOeU")},s=r("VU/8")(o.a,a,!1,i,"data-v-071c84dc",null);t.default=s.exports},YJId:function(e,t,r){"use strict";(function(e){var o=r("7QTg"),a=(r.n(o),r("fxnj")),i=r.n(a),s=void 0,n=r("xrTZ").Base64;t.a={data:function(){return{searchBarFixed:!1,load:!0,finished:!1,showDetail:!1,left:{days:"0",hours:"0",minitus:"0",seconds:"0"},product:{pictureList:[]},rule:{currentNum:0},ruleId:this.$route.query.ruleId,swiperOption:{notNextTick:!0,autoplay:{disableOnInteraction:!1,delay:6e3},pagination:{el:".swiper-pagination"},loop:!0},serviceDesc1:"",serviceDescMore1:""}},created:function(){s=this},mounted:function(){var e=location.href.split("#")[0];s.receiveData.wxconfig(s,i.a,["onMenuShareTimeline","onMenuShareAppMessage"],e),s.read(),window.addEventListener("scroll",this.handleScroll)},updated:function(){s.drawP()},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t=document.querySelector("#searchBar").offsetTop;s.searchBarFixed=e>t},read:function(){""!=s.ruleId&&s.query()},query:function(){var e="getRgroupRule/"+s.ruleId;s.receiveData.getData(s,e,"Data",function(){s.Data.success?s.Data.result&&(s.load=!1,s.rule=s.Data.result,s.products(s.rule.productId),setInterval(s.updateLeftTime,1e3)):(s.load=!1,alert(null==s.Data.message?"获取团购信息失败！":s.Data.message))})},products:function(e){var t="getProduct/"+e;s.receiveData.getData(s,t,"res",function(){s.res.success?s.res.result&&(s.product=s.res.result,s.serviceDesc1=n.decode(s.product.serviceDesc),s.serviceDescMore1=n.decode(s.product.serviceDescMore),s.setShare()):alert(null==s.res.message?"获取产品信息失败！":s.res.message)})},setShare:function(){s.common.initShareConfig(s.rule.name,s.basePageUrlpay+"hxrgroups.html?"+s.common.getoriApp()+"#/rgroupdetail?ruleId="+s.ruleId,s.product.smallPicture,"快来参加"+s.common.newname+"的优惠商品抢购吧",i.a)},updateLeftTime:function(){if(s.rule.leftSeconds>0){s.finished=!1,s.rule.leftSeconds=s.rule.leftSeconds-1;var e=s.rule.leftSeconds,t=parseInt(e/86400);s.left.days=t<10?"0"+t:t,e%=86400;var r=parseInt(e/3600);s.left.hours=r<10?"0"+r:r,e%=3600;var o=parseInt(e/60);s.left.minitus=o<10?"0"+o:o,e%=60,s.left.seconds=e<10?"0"+e:e}else s.finished=!0},drawP:function(){s.drawProcess(e("#products canvas")[0],35,35,28,s.rule.process,"#E5E2DD","#FF8A00","#FF8A00")},drawProcess:function(e,t,r,o,a,i,s,n){if(void 0!=a&&null!=a&&e.getContext){var c=e.getContext("2d");c.beginPath(),c.moveTo(t,r),c.arc(t,r,o,0,2*Math.PI,!1),c.closePath(),c.fillStyle=i,c.fill(),c.beginPath(),c.moveTo(t,r),c.arc(t,r,o,1.5*Math.PI,1.5*Math.PI+2*Math.PI*a/100,!1),c.closePath(),c.fillStyle=s,c.fill(),c.beginPath(),c.moveTo(t,r),c.arc(t,r,o-.04*o,0,2*Math.PI,!0),c.closePath(),c.fillStyle="rgba(255,255,255,1)",c.fill(),c.beginPath(),c.arc(t,r,o-.04*o,0,2*Math.PI,!0),c.closePath(),c.strokeStyle=i,c.stroke(),c.font="8pt Arial",c.fillStyle=n,c.textAlign="center",c.textBaseline="middle",c.moveTo(t,r-7),c.fillText(a+"%",t,r-7),c.moveTo(t,r+7);var l=a<100?"进行中":"已成团";c.fillText(l,t,r+7);var u=t+Math.sin(2*Math.PI*a/100)*(o-1.6),d=r-Math.cos(2*Math.PI*a/100)*(o-1.6);c.beginPath(),c.moveTo(u,d),c.arc(u,d,3,0,2*Math.PI,!0),c.closePath(),c.fillStyle=s,c.fill()}},toggleDetail:function(){s.showDetail=!s.showDetail},gotosgrouprulr:function(){s.$router.push({path:"/sgrouprule"})},goclassify:function(){s.$router.push({path:"/",query:{type:s.rule.productType}})},buy:function(){s.rule.id&&s.$router.push({path:"/buy",query:{type:"4",ruleId:s.rule.id}})}},components:{swiper:o.swiper,swiperSlide:o.swiperSlide},computed:{}}}).call(t,r("7t+N"))},dOeU:function(e,t){},xrTZ:function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t){module.exports=t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,function(global){"use strict";var _Base64=global.Base64,version="2.5.0",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},r=0,o=e.length;r<o;r++)t[e.charAt(r)]=r;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(r>>>18),b64chars.charAt(r>>>12&63),t>=2?"=":b64chars.charAt(r>>>6&63),t>=1?"=":b64chars.charAt(63&r)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,r=t%4,o=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),a=[fromCharCode(o>>>16),fromCharCode(o>>>8&255),fromCharCode(255&o)];return a.length-=[0,0,2,1][r],a.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),void 0!==module&&module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}})}).call(exports,__webpack_require__("DuR2"))}});