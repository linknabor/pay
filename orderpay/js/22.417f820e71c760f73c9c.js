webpackJsonp([22],{BD5V:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("fxnj"),r=t.n(a),o=void 0,n={data:function(){return{zzshow:!1,orders:[],currentStatus:"ALL",dropdownCollapsed:!1,type:this.$route.query.type,selectedName:"订单筛选",dropdowns:[{name:"全部订单",value:"ALL"},{name:"待付款订单",value:"NEEDPAY"},{name:"已支付",value:"PAYED"},{name:"已取消订单",value:"CANCELD"}]}},created:function(){o=this},components:{},computed:{},mounted:function(){o.query()},methods:{query:function(){o.receiveData.getData(o,"evoucher/orders/"+o.currentStatus,"res",function(){o.res.success?o.orders=o.res.result:alert(o.res.messages)})},goorder:function(s){1==s?o.$router.push({path:"/special",query:{type:s}}):2==s?o.$router.push({path:"/cardorder",query:{type:s}}):o.$router.push({path:"/grouporders",query:{type:s}})},toggleDropdown:function(){o.dropdownCollapsed=!o.dropdownCollapsed},selectDropdown:function(s){o.selectedName=o.dropdowns[s].name,o.currentStatus=o.dropdowns[s].value,o.query()},orderPay:function(s){o.zzshow=!0,o.receiveData.getData(o,"requestPay/"+s.id,"n",function(){o.n.success||(alert(o.n.message),o.zzshow=!1),r.a.config({debug:!1,appId:o.n.result.appId,timestamp:o.n.result.timestamp,nonceStr:o.n.result.nonceStr,signature:o.n.result.signature,jsApiList:["chooseWXPay"]}),r.a.chooseWXPay({timestamp:o.n.result.timestamp,nonceStr:o.n.result.nonceStr,package:o.n.result.pkgStr,signType:o.n.result.signType,paySign:o.n.result.signature,success:function(e){o.notifyPaySuccess(s)},cancel:function(s){o.zzshow=!1}})})},notifyPaySuccess:function(s){o.receiveData.getData(o,"/notifyPayed/"+s.id,"res",function(){o.res.success?(s.status=1,s.statusStr="已支付",o.zzshow=!1):alert(o.res.message)})},orderCancel:function(s){o.receiveData.getData(o,"/cancelOrder/"+s.id,"res",function(){o.res.success?(s.status=2,s.statusStr="已取消",alert("订单已取消")):alert(null==o.res.message?"取消失败，请稍后重试！":o.res.message)})},cancelPay:function(s){o.receiveData.getData(o,"/order/cancelRequestPay/"+s.id,"res",function(){o.res.success||alert(o.res.message)})},VolumeCode:function(s){window.location.href=o.basePageUrl+"person/index.html?"+o.common.getoriApp()+"#/cardrolldetail?orderId="+s.id}}},c={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"cardorder"},[t("div",{staticClass:"headersp ov"},[t("div",{staticClass:"fl",class:{white:1==s.type},on:{click:function(e){s.goorder(1)}}},[t("span",{class:{spanborder:1==s.type}},[s._v("电商订单")])]),s._v(" "),t("div",{staticClass:"fl",class:{white:2==s.type},on:{click:function(e){s.goorder(2)}}},[t("span",{class:{spanborder:2==s.type}},[s._v("优惠订单")])]),s._v(" "),t("div",{staticClass:"fl",class:{white:3==s.type},on:{click:function(e){s.goorder(3)}}},[t("span",{class:{spanborder:3==s.type}},[s._v("团购订单")])])]),s._v(" "),t("div",{staticClass:"dropdown-wrap ",class:{dropdownCollapsed:s.dropdownCollapsed},on:{click:s.toggleDropdown}},[t("span",[s._v(s._s(s.selectedName))]),s._v(" "),s.dropdownCollapsed?t("div",{staticClass:"dropdown"},s._l(s.dropdowns,function(e,a){return t("div",{key:a,staticClass:"dropdown-item",class:{noborder:s.dropdowns.length-1==a},on:{click:function(e){s.selectDropdown(a)}}},[s._v(s._s(e.name))])})):s._e()]),s._v(" "),t("div",{staticClass:"card-content"},[s._l(s.orders,function(e){return t("div",{key:e.id,staticClass:"ov lite-divider pd10 ",staticStyle:{color:"#3b3937"}},[t("div",{staticClass:"marg-bottom"},[t("img",{staticClass:"icon-repair fl",attrs:{src:e.productThumbPic}}),s._v(" "),t("div",{staticClass:"ov right-text not-used"},[t("div",{staticClass:"spot pbottom"},[s._v(s._s(e.productName))]),s._v(" "),t("div",{staticClass:"pbottom"},[s._v("¥"+s._s(e.price))]),s._v(" "),t("div",{staticClass:"ptop ov "},[t("span",{staticClass:"fl "},[s._v("数量: "+s._s(e.count))]),s._v(" "),t("span",{staticClass:"p15 right-color used-r"},[s._v(s._s(e.statusStr))])])])]),s._v(" "),t("div",{staticClass:"mrg5"},[t("span",{staticClass:"fl"},[s._v(s._s(e.createDateStr))]),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"item.status == 0"}],staticClass:"fr crrd-color card-jm",on:{click:function(t){t.stopPropagation(),s.orderPay(e)}}},[s._v("付款")]),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"item.status == 0"}],staticClass:"fr card-jm",on:{click:function(t){t.stopPropagation(),s.orderCancel(e)}}},[s._v("取消订单")]),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:1==e.status,expression:"item.status == 1"}],staticClass:"fr card-jm",on:{click:function(t){s.VolumeCode(e)}}},[s._v("查看劵码")])])])}),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.zzshow,expression:"zzshow"}],staticClass:"zzmb",staticStyle:{display:"none",position:"fixed"},attrs:{id:"zzmb"}})],2)])},staticRenderFns:[]};var i=t("VU/8")(n,c,!1,function(s){t("QSHX")},"data-v-0675d576",null);e.default=i.exports},QSHX:function(s,e){}});