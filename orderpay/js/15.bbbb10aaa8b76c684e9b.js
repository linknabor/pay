webpackJsonp([15],{g1yJ:function(t,s){},nbMf:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),n=e.n(a),o=e("Au9i"),r=e("fxnj"),i=e.n(r),c=void 0,u={data:function(){return{Mask:!1,groupsNum:1,dropdownCollapsed:!1,selectedName:"订单筛选",currentStatus:"ALL",orders:[],dropdowns:[{name:"全部订单",value:"ALL"},{name:"待付款订单",value:"NEEDPAY"},{name:"已支付",value:"PAYED"},{name:"已取消订单",value:"CANCELD"}],bgImage:this.common.GetImages("1")}},created:function(){c=this},mounted:function(){this.firstALL()},components:{},methods:{initSession4Test:function(){c.receiveData.getData(c,"/initSession4Test/62","Data",function(){})},firstALL:function(){c.receiveData.getData(c,"orders/status/"+c.currentStatus,"res",function(){c.res.success?(c.orders=c.res.result,"ALL"==c.currentStatus&&(c.groupsNum=c.res.result.length)):c.orders=[]})},toggleDropdown:function(){c.dropdownCollapsed=!c.dropdownCollapsed},selectDropdown:function(t){c.selectedName=c.dropdowns[t].name,c.currentStatus=c.dropdowns[t].value,c.firstALL(c.currentStatus)},gotoDetail:function(t){c.$router.push({path:"/orderdetail",query:{orderId:t}})},orderCancel:function(t){o.MessageBox.confirm("确定要取消订单?").then(function(s){"confirm"==s&&c.receiveData.getData(c,"/cancelOrder/"+t.id,"res",function(){c.res.success?(t.status=2,t.statusStr="已取消",alert("订单已取消")):alert("支付取消失败，请稍后重试！")})}).catch(function(t){})},orderPay:function(t){c.Mask=!0,c.receiveData.getData(c,"requestPay/"+t.id,"n",function(){c.n.success||(c.Mask=!1,alert(null==c.n.message?"下单失败，请稍后重试！":c.n.message)),i.a.config({debug:!1,appId:c.n.result.appId,timestamp:c.n.result.timestamp,nonceStr:c.n.result.nonceStr,signature:c.n.result.signature,jsApiList:["chooseWXPay"]}),i.a.chooseWXPay({timestamp:c.n.result.timestamp,nonceStr:c.n.result.nonceStr,package:c.n.result.pkgStr,signType:c.n.result.signType,paySign:c.n.result.signature,success:function(s){c.Mask=!1,c.notifyPaySuccess(),t.status=1},fail:function(t){c.Mask=!1,console.log(n()(t))},cancel:function(t){alert("支付取消"),c.Mask=!1}})})},notifyPaySuccess:function(t){c.receiveData.getData(c,"/notifyPayed/"+t.id,"n",function(){})},orderConfirm:function(t){o.MessageBox.confirm("确定要已收货?").then(function(s){"confirm"==s&&c.receiveData.getData(c,"/signOrder/"+t.id,"n",function(){c.n.success?(t.status=6,t.statusStr="已签收"):alert("支付签收失败，请稍后重试！")})}).catch(function(t){})},checkLogisics:function(t){var s=escape(t.logisticName);c.$router.push({path:"/logistice",query:{com:s,nu:t.logisticNo}})},comment:function(t){c.$router.push({path:"/comment",query:{orderId:t.id}})}},computed:{}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"orders"},[e("div",{staticClass:"dropdown-wrap",class:{dropdownCollapsed:t.dropdownCollapsed},on:{click:t.toggleDropdown}},[e("span",[t._v(t._s(t.selectedName))]),t._v(" "),t.dropdownCollapsed?e("div",{staticClass:"dropdown"},t._l(t.dropdowns,function(s,a){return e("div",{staticClass:"dropdown-item",class:{noborder:t.dropdowns.length-1==a},on:{click:function(s){t.selectDropdown(a)}}},[t._v(t._s(s.name))])})):t._e()]),t._v(" "),0==t.groupsNum?e("div",{staticClass:"rels"},[e("img",{staticClass:"center-bgs",attrs:{src:t.bgImage,alt:""}})]):t._e(),t._v(" "),t._l(t.orders,function(s){return e("div",{staticClass:"order-item p15 divider",on:{click:function(e){e.stopPropagation(),t.gotoDetail(s.id)}}},[e("div",{staticClass:"marg-bottom ov"},[e("img",{staticClass:"fl order-picture",attrs:{src:s.productThumbPic}}),t._v(" "),e("div",{staticClass:"ov pb10 fs14"},[t._v(t._s(s.productName))]),t._v(" "),e("div",{staticClass:"ov pb10",staticStyle:{color:"#3b3937"}},[e("span",{staticClass:"fl fs13"},[t._v("\n        ¥"+t._s(s.price)+"\n        ")]),t._v(" "),e("span",{staticClass:"fr status highlight"},[t._v(t._s(s.statusStr))])])]),t._v(" "),e("div",{staticClass:"pt15 fs13"},[e("span",[t._v(t._s(s.createDateStr))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:2==s.status,expression:"order.status==2"}],staticClass:"lite-btn fs13 fr",on:{click:function(e){e.stopPropagation(),t.gotoDetail(s.id)}}},[t._v("查看订单")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:0==s.status,expression:"order.status==0"}],staticClass:"lite-btn fs13 fr",on:{click:function(e){e.stopPropagation(),t.orderCancel(s)}}},[t._v("取消")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:0==s.status,expression:"order.status==0"}],staticClass:"lite-btn fs13 fr",staticStyle:{"margin-right":"0.1rem"},on:{click:function(e){e.stopPropagation(),t.orderPay(s)}}},[t._v("付款")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:5==s.status,expression:"order.status==5"}],staticClass:"lite-btn fs13 fr",on:{click:function(e){e.stopPropagation(),t.orderConfirm(s)}}},[t._v("确认收货")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:5==s.status,expression:"order.status==5"}],staticClass:"lite-btn fs13 fr",staticStyle:{"margin-right":"5px"},on:{click:function(e){e.stopPropagation(),t.checkLogisics(s)}}},[t._v("查看物流")]),t._v(" "),e("span",[e("div",{directives:[{name:"show",rawName:"v-show",value:6==s.status&&1!=s.pingjiaStatus,expression:"order.status==6&&order.pingjiaStatus!=1"}],staticClass:"lite-btn fs13 fr",on:{click:function(e){e.stopPropagation(),t.comment(s)}}},[t._v("评价商品")])])])])}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.Mask,expression:"Mask"}],staticClass:"box-bg"})],2)},staticRenderFns:[]};var l=e("VU/8")(u,d,!1,function(t){e("g1yJ")},"data-v-55cd2580",null);s.default=l.exports}});