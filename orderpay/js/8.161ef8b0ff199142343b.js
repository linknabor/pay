webpackJsonp([8],{BD5V:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("fxnj"),o=t.n(a),n=void 0,r={data:function(){return{zzshow:!1,orders:[],currentStatus:"ALL",dropdownCollapsed:!1,selectedName:"订单筛选",dropdowns:[{name:"全部订单",value:"ALL"},{name:"待付款订单",value:"NEEDPAY"},{name:"已支付",value:"PAYED"},{name:"已取消订单",value:"CANCELD"}]}},created:function(){n=this},components:{},computed:{},mounted:function(){n.query()},methods:{query:function(){n.receiveData.getData(n,"evoucher/orders/"+n.currentStatus,"res",function(){n.res.success?n.orders=n.res.result:alert(n.res.messages)})},toggleDropdown:function(){n.dropdownCollapsed=!n.dropdownCollapsed},selectDropdown:function(s){n.selectedName=n.dropdowns[s].name,n.currentStatus=n.dropdowns[s].value,n.query()},orderPay:function(s){n.zzshow=!0,n.receiveData.getData(n,"requestPay/"+s.id,"n",function(){n.n.success||(alert(n.n.message),n.zzshow=!1),o.a.config({debug:!1,appId:n.n.result.appId,timestamp:n.n.result.timestamp,nonceStr:n.n.result.nonceStr,signature:n.n.result.signature,jsApiList:["chooseWXPay"]}),o.a.chooseWXPay({timestamp:n.n.result.timestamp,nonceStr:n.n.result.nonceStr,package:n.n.result.pkgStr,signType:n.n.result.signType,paySign:n.n.result.signature,success:function(e){n.notifyPaySuccess(s)},cancel:function(s){n.zzshow=!1}})})},notifyPaySuccess:function(s){n.receiveData.getData(n,"/notifyPayed/"+s.id,"res",function(){n.res.success?(s.status=1,s.statusStr="已支付",n.zzshow=!1):alert(n.res.message)})},orderCancel:function(s){n.receiveData.getData(n,"/cancelOrder/"+s.id,"res",function(){n.res.success?(s.status=2,s.statusStr="已取消",alert("订单已取消")):alert(null==n.res.message?"取消失败，请稍后重试！":n.res.message)})},cancelPay:function(s){n.receiveData.getData(n,"/order/cancelRequestPay/"+s.id,"res",function(){n.res.success||alert(n.res.message)})},VolumeCode:function(s){window.location.href=n.basePageUrl+"person/index.html?"+n.common.getoriApp()+"#/cardrolldetail?orderId="+s.id}}},c={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"cardorder"},[t("div",{staticClass:"card-content"},[t("div",{staticClass:"dropdown-wrap ",class:{dropdownCollapsed:s.dropdownCollapsed},on:{click:s.toggleDropdown}},[t("span",[s._v(s._s(s.selectedName))]),s._v(" "),s.dropdownCollapsed?t("div",{staticClass:"dropdown"},s._l(s.dropdowns,function(e,a){return t("div",{key:a,staticClass:"dropdown-item",class:{noborder:s.dropdowns.length-1==a},on:{click:function(e){s.selectDropdown(a)}}},[s._v(s._s(e.name))])})):s._e()]),s._v(" "),s._l(s.orders,function(e){return t("div",{key:e.id,staticClass:"ov lite-divider pd10 ",staticStyle:{color:"#3b3937"}},[t("div",{staticClass:"marg-bottom"},[t("img",{staticClass:"icon-repair fl",attrs:{src:e.productThumbPic}}),s._v(" "),t("div",{staticClass:"ov right-text not-used"},[t("div",{staticClass:"spot pbottom"},[s._v(s._s(e.productName))]),s._v(" "),t("div",{staticClass:"pbottom"},[s._v("¥"+s._s(e.price))]),s._v(" "),t("div",{staticClass:"ptop ov "},[t("span",{staticClass:"fl "},[s._v("数量: "+s._s(e.count))]),s._v(" "),t("span",{staticClass:"p15 right-color used-r"},[s._v(s._s(e.statusStr))])])])]),s._v(" "),t("div",{staticClass:"mrg5"},[t("span",{staticClass:"fl"},[s._v(s._s(e.createDateStr))]),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"item.status == 0"}],staticClass:"fr crrd-color card-jm",on:{click:function(t){t.stopPropagation(),s.orderPay(e)}}},[s._v("付款")]),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:0==e.status,expression:"item.status == 0"}],staticClass:"fr card-jm",on:{click:function(t){t.stopPropagation(),s.orderCancel(e)}}},[s._v("取消订单")]),s._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:1==e.status,expression:"item.status == 1"}],staticClass:"fr card-jm",on:{click:function(t){s.VolumeCode(e)}}},[s._v("查看劵码")])])])}),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.zzshow,expression:"zzshow"}],staticClass:"zzmb",staticStyle:{display:"none",position:"fixed"},attrs:{id:"zzmb"}})],2)])},staticRenderFns:[]};var i=t("VU/8")(r,c,!1,function(s){t("NN++")},"data-v-aa61ed56",null);e.default=i.exports},"NN++":function(s,e){}});