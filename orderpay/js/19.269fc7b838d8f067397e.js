webpackJsonp([19],{"2YIw":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),o=e.n(a),n=e("Au9i"),r=e("fxnj"),i=e.n(r),c=void 0,u={data:function(){return{Mask:!1,type:this.$route.query.type,orders:[],currentStatus:"ALL",dropdownCollapsed:!1,selectedName:"订单筛选",dropdowns:[{name:"全部订单",value:"ALL"},{name:"待付款订单",value:"NEEDPAY"},{name:"已支付",value:"PAYED"},{name:"已取消订单",value:"CANCELD"}]}},created:function(){c=this},components:{},computed:{},mounted:function(){c.query()},methods:{initSession4Test:function(){c.receiveData.getData(c,"/initSession4Test/8427","Data",function(){})},query:function(){c.receiveData.getData(c,"orders/status/onsale/"+c.currentStatus,"res",function(){c.res.success?c.orders=c.res.result:null!=c.res.message&&40001!=c.res.errorCode&&alert(c.res.message)})},toggleDropdown:function(){c.dropdownCollapsed=!c.dropdownCollapsed},selectDropdown:function(t){c.selectedName=c.dropdowns[t].name,c.currentStatus=c.dropdowns[t].value,c.query()},goorder:function(t){1==t?c.$router.push({path:"/special",query:{type:t}}):2==t?c.$router.push({path:"/cardorder",query:{type:t}}):c.$router.push({path:"/grouporders",query:{type:t}})},detail:function(t){c.$router.push({path:"/clientdetail",query:{orderId:t.id}})},orderCancel:function(t){n.MessageBox.confirm("确定要取消订单?").then(function(s){"confirm"==s&&c.receiveData.getData(c,"/cancelOrder/"+t.id,"res",function(){c.res.success?(t.status=2,t.statusStr="已取消",alert("订单已取消")):alert("支付取消失败，请稍后重试！")})}).catch(function(t){})},pay:function(t){c.Mask=!0;var s="/requestPay/"+t.id;c.receiveData.postData(c,s,{},"n",function(){c.n.success?(i.a.config({debug:!1,appId:c.n.result.appId,timestamp:c.n.result.timestamp,nonceStr:c.n.result.nonceStr,signature:c.n.result.signature,jsApiList:["chooseWXPay"]}),i.a.chooseWXPay({timestamp:c.n.result.timestamp,nonceStr:c.n.result.nonceStr,package:c.n.result.pkgStr,signType:c.n.result.signType,paySign:c.n.result.signature,success:function(t){alert("下单成功！"),c.Mask=!1},fail:function(t){c.Mask=!1,console.log(o()(t))},cancel:function(t){alert("支付取消"),c.Mask=!1}})):(c.Mask=!1,alert(null==c.n.message?"下单失败，请稍后重试！":c.n.message))})},orderConfirm:function(t){n.MessageBox.confirm("确定要已收货?").then(function(s){"confirm"==s&&c.receiveData.getData(c,"/signOrder/"+t.id,"n",function(){c.n.success?(t.status=6,t.statusStr="已签收"):alert("支付签收失败，请稍后重试！")})}).catch(function(t){})},checkLogisics:function(t){var s=escape(t.logisticName);c.$router.push({path:"/logistice",query:{com:s,nu:t.logisticNo}})},comment:function(t){c.$router.push({path:"/comment",query:{orderId:t.id}})}}},l={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wapr"},[e("div",{staticClass:"headersp ov"},[e("div",{staticClass:"fl",class:{white:1==t.type},on:{click:function(s){t.goorder(1)}}},[e("span",{class:{spanborder:1==t.type}},[t._v("电商订单")])]),t._v(" "),e("div",{staticClass:"fl",class:{white:2==t.type},on:{click:function(s){t.goorder(2)}}},[e("span",{class:{spanborder:2==t.type}},[t._v("优惠订单")])]),t._v(" "),e("div",{staticClass:"fl",class:{white:3==t.type},on:{click:function(s){t.goorder(3)}}},[e("span",{class:{spanborder:3==t.type}},[t._v("团购订单")])])]),t._v(" "),e("div",[e("div",{staticClass:"dropdown-wrap ",class:{dropdownCollapsed:t.dropdownCollapsed},on:{click:t.toggleDropdown}},[e("span",[t._v(t._s(t.selectedName))]),t._v(" "),t.dropdownCollapsed?e("div",{staticClass:"dropdown"},t._l(t.dropdowns,function(s,a){return e("div",{key:a,staticClass:"dropdown-item",class:{noborder:t.dropdowns.length-1==a},on:{click:function(s){t.selectDropdown(a)}}},[t._v(t._s(s.name))])})):t._e()])]),t._v(" "),t._l(t.orders,function(s){return e("div",{key:s.id,staticClass:"ov lite-divider pd10 ",staticStyle:{color:"#3b3937"},on:{click:function(e){e.stopPropagation(),t.detail(s)}}},[e("div",{staticClass:"marg-bottom"},[e("img",{staticClass:"icon-repair fl",attrs:{src:s.productThumbPic}}),t._v(" "),e("div",{staticClass:"ov right-text not-used"},[e("div",{staticClass:"spot pbottom"},[t._v(t._s(s.productName))]),t._v(" "),e("div",{staticClass:"pbottom"},[t._v("¥"+t._s(s.price))]),t._v(" "),e("div",{staticClass:"ptop ov "},[e("span",{staticClass:"fl "},[t._v("数量: "+t._s(s.count))]),t._v(" "),e("span",{staticClass:"p15 right-color used-r"},[t._v(t._s(s.statusStr))])])])]),t._v(" "),e("div",{staticClass:"mrg5"},[e("span",{staticClass:"fl"},[t._v(t._s(s.createDateStr))]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:0==s.status,expression:"item.status==0"}],staticClass:"fr crrd-color card-jm",on:{click:function(e){e.stopPropagation(),t.orderCancel(s)}}},[t._v("取消")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:0==s.status,expression:"item.status==0"}],staticClass:"fr crrd-color card-jm",on:{click:function(e){e.stopPropagation(),t.pay(s)}}},[t._v("付款")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:2==s.status,expression:"item.status==2"}],staticClass:"fr crrd-color card-jm",on:{click:function(e){e.stopPropagation(),t.detail(s)}}},[t._v("查看订单")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:5==s.status,expression:"item.status==5"}],staticClass:"fr crrd-color card-jm",on:{click:function(e){e.stopPropagation(),t.orderConfirm(s)}}},[t._v("确认收货")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:6==s.status&&1!=s.pingjiaStatus,expression:"item.status==6&&item.pingjiaStatus!=1"}],staticClass:"fr crrd-color card-jm",on:{click:function(e){e.stopPropagation(),t.comment(s)}}},[t._v("评价商品")])])])}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.Mask,expression:"Mask"}],staticClass:"box-bg"})],2)},staticRenderFns:[]};var d=e("VU/8")(u,l,!1,function(t){e("CoRt")},"data-v-29f169f0",null);s.default=d.exports},CoRt:function(t,s){}});